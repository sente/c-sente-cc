<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/tmp/daily/04/04/tablib/tablib/packages/markup3.py.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#080808" text="#ffffff"><font face="monospace">
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;1 </font></span><font color="#00ffff"># This code is in the public domain, it comes</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;2 </font></span><font color="#00ffff"># with absolutely no warranty and you can do</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;3 </font></span><font color="#00ffff"># absolutely whatever you want with it.</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;4 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;5 </font></span>__date__ = <span style="background-color: #262626"><font color="#ffaf5f">'17 May 2007'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;6 </font></span>__version__ = <span style="background-color: #262626"><font color="#ffaf5f">'1.7'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;7 </font></span><font color="#87ffaf">__doc__</font>= <span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;8 </font></span><span style="background-color: #262626"><font color="#ffaf5f">This is markup.py - a Python module that attempts to</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;&nbsp;9 </font></span><span style="background-color: #262626"><font color="#ffaf5f">make it easier to generate HTML/XML from a Python program</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;10 </font></span><span style="background-color: #262626"><font color="#ffaf5f">in an intuitive, lightweight, customizable and pythonic way.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;11 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;12 </font></span><span style="background-color: #262626"><font color="#ffaf5f">The code is in the public domain.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;13 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;14 </font></span><span style="background-color: #262626"><font color="#ffaf5f">Version: </font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;as of </font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;15 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;16 </font></span><span style="background-color: #262626"><font color="#ffaf5f">Documentation and further info is at <a href="http://markup.sourceforge.net/">http://markup.sourceforge.net/</a></font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;17 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;18 </font></span><span style="background-color: #262626"><font color="#ffaf5f">Please send bug reports, feature requests, enhancement</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;19 </font></span><span style="background-color: #262626"><font color="#ffaf5f">ideas or questions to nogradi at gmail dot com.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;20 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;21 </font></span><span style="background-color: #262626"><font color="#ffaf5f">Installation: drop markup.py somewhere into your Python path.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;22 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;</font></span>&nbsp;% ( __version__, __date__ )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;23 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;24 </font></span><font color="#ffff00">import</font>&nbsp;string<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;25 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;26 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>element</b></font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;27 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This class handles the addition of a new element.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;28 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;29 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag, case=<span style="background-color: #262626"><font color="#ffaf5f">'lower'</font></span>, parent=<font color="#ffff00">None</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;30 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent = parent<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;31 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;32 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;case == <span style="background-color: #262626"><font color="#ffaf5f">'lower'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;33 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag = tag<span style="background-color: #080808"><font color="#ffffff">.</font></span>lower( )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;34 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;35 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag = tag<span style="background-color: #080808"><font color="#ffffff">.</font></span>upper( )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;36 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;37 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__call__</b></font>( self, *args, **kwargs ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;38 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) &gt; <font color="#ff5f5f">1</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;39 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;ArgumentError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;40 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;41 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ffff"># if class_ was defined in parent it should be added to every element</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;42 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>&nbsp;<font color="#ffff00">and</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>class_ <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;43 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'class_'</font></span>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">in</font>&nbsp;kwargs:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;44 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kwargs[<span style="background-color: #262626"><font color="#ffaf5f">'class_'</font></span>] = self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>class_<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;45 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;46 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">None</font>&nbsp;<font color="#ffff00">and</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) == <font color="#ff5f5f">1</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;47 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = [ self<span style="background-color: #080808"><font color="#ffffff">.</font></span>render( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, <font color="#ffff00">False</font>, myarg, mydict ) <font color="#ffff00">for</font>&nbsp;myarg, mydict <font color="#ffff00">in</font>&nbsp;_argsdicts( args, kwargs ) ]<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;48 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\n</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span><span style="background-color: #080808"><font color="#ffffff">.</font></span>join( x )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;49 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">None</font>&nbsp;<font color="#ffff00">and</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) == <font color="#ff5f5f">0</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;50 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = [ self<span style="background-color: #080808"><font color="#ffffff">.</font></span>render( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, <font color="#ffff00">True</font>, myarg, mydict ) <font color="#ffff00">for</font>&nbsp;myarg, mydict <font color="#ffff00">in</font>&nbsp;_argsdicts( args, kwargs ) ]<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;51 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\n</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span><span style="background-color: #080808"><font color="#ffffff">.</font></span>join( x )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;52 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;53 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;54 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;myarg, mydict <font color="#ffff00">in</font>&nbsp;_argsdicts( args, kwargs ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;55 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>render( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, <font color="#ffff00">False</font>, myarg, mydict )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;56 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;57 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) == <font color="#ff5f5f">0</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;58 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;myarg, mydict <font color="#ffff00">in</font>&nbsp;_argsdicts( args, kwargs ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;59 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>render( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, <font color="#ffff00">True</font>, myarg, mydict )&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ffff"># here myarg is always None, because len( args ) = 0</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;60 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;61 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;ClosingError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;62 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">and</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;63 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;DeprecationError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;64 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;65 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;InvalidElementError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;66 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;67 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>render</b></font>( self, tag, single, between, kwargs ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;68 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Append the actual tags to content.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;69 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;70 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span>&nbsp;% tag<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;71 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;key, value <font color="#ffff00">in</font>&nbsp;kwargs<span style="background-color: #080808"><font color="#ffffff">.</font></span>items( ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;72 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if value is not None:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # when value is None that means stuff like &lt;... checked&gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;73 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = key<span style="background-color: #080808"><font color="#ffffff">.</font></span>strip(<span style="background-color: #262626"><font color="#ffaf5f">'_'</font></span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ffff"># strip this so class_ will mean class, etc.</font><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;74 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if key == 'http_equiv':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # special cases, maybe change _ to - overall?</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;75 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = <span style="background-color: #262626"><font color="#ffaf5f">'http-equiv'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;76 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;key == <span style="background-color: #262626"><font color="#ffaf5f">'accept_charset'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;77 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = <span style="background-color: #262626"><font color="#ffaf5f">'accept-charset'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;78 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">=</font></span><font color="#ffd7d7">\&quot;</font><font color="#ffd7d7">%s</font><font color="#ffd7d7">\&quot;</font><span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span>&nbsp;% ( out, key, escape( value ) )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;79 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;80 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span>&nbsp;% ( out, key )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;81 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;between <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;82 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&gt;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&lt;/</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&gt;&quot;</font></span>&nbsp;% ( out, between, tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;83 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;84 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;single:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;85 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;/&gt;&quot;</font></span>&nbsp;% out<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;86 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;87 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&gt;&quot;</font></span>&nbsp;% out<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;88 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;89 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>content<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( out )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;90 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;91 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;out<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;92 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;93 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>close</b></font>( self ):<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;94 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Append a closing tag unless element has only opening tag.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;95 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;96 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;97 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>content<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;/</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&gt;&quot;</font></span>&nbsp;% self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;98 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags:<br>
<span style="background-color: #080808"><font color="#5f5fff">&nbsp;99 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;ClosingError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">100 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">and</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags:<br>
<span style="background-color: #080808"><font color="#5f5fff">101 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;DeprecationError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">102 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">103 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>open</b></font>( self, **kwargs ):<br>
<span style="background-color: #080808"><font color="#5f5fff">104 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Append an opening tag.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">105 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">106 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags <font color="#ffff00">or</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags:<br>
<span style="background-color: #080808"><font color="#5f5fff">107 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>render( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag, <font color="#ffff00">False</font>, <font color="#ffff00">None</font>, kwargs )<br>
<span style="background-color: #080808"><font color="#5f5fff">108 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">and</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag <font color="#ffff00">in</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>parent<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags:<br>
<span style="background-color: #080808"><font color="#5f5fff">109 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;DeprecationError( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>tag )<br>
<span style="background-color: #080808"><font color="#5f5fff">110 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">111 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>page</b></font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">112 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This is our main class representing a document. Elements are added</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">113 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;as attributes of an instance of this class.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">114 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">115 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, mode=<span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>, case=<span style="background-color: #262626"><font color="#ffaf5f">'lower'</font></span>, onetags=<font color="#ffff00">None</font>, twotags=<font color="#ffff00">None</font>, separator=<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\n</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>, class_=<font color="#ffff00">None</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">116 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Stuff that effects the whole document.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">117 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">118 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode -- 'strict_html'&nbsp;&nbsp; for HTML 4.01 (default)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">119 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'html'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias for 'strict_html'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">120 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'loose_html'&nbsp;&nbsp;&nbsp;&nbsp;to allow some deprecated elements</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">121 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'xml'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to allow arbitrary elements</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">122 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">123 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case -- 'lower'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element names will be printed in lower case (default)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">124 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'upper'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; they will be printed in upper case</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">125 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">126 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onetags --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list or tuple of valid elements with opening tags only</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">127 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;twotags --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list or tuple of valid elements with both opening and closing tags</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">128 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;these two keyword arguments may be used to select</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">129 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the set of valid elements in 'xml' mode</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">130 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalid elements will raise appropriate exceptions</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">131 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">132 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;separator --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string to place between added elements, defaults to newline</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">133 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">134 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_ --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a class that will be added to every element if defined&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">135 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">136 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid_onetags = [ <span style="background-color: #262626"><font color="#ffaf5f">&quot;AREA&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BASE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BR&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;COL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;FRAME&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;HR&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;IMG&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;INPUT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;LINK&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;META&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;PARAM&quot;</font></span>&nbsp;]<br>
<span style="background-color: #080808"><font color="#5f5fff">137 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valid_twotags = [ <span style="background-color: #262626"><font color="#ffaf5f">&quot;A&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;ABBR&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;ACRONYM&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;ADDRESS&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;B&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BDO&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BIG&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BLOCKQUOTE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BODY&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;BUTTON&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">138 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;CAPTION&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;CITE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;CODE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;COLGROUP&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DD&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DEL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DFN&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DIV&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;EM&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;FIELDSET&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">139 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;FORM&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;FRAMESET&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H1&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H2&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H3&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H4&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H5&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;H6&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;HEAD&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;HTML&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;I&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;IFRAME&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;INS&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">140 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;KBD&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;LABEL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;LEGEND&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;LI&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;MAP&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;NOFRAMES&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;NOSCRIPT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;OBJECT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;OL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;OPTGROUP&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">141 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;OPTION&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;P&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;PRE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;Q&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SAMP&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SCRIPT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SELECT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SMALL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SPAN&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;STRONG&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;STYLE&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">142 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;SUB&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;SUP&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TABLE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TBODY&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TD&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TEXTAREA&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TFOOT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TH&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;THEAD&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TITLE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;TR&quot;</font></span>,<br>
<span style="background-color: #080808"><font color="#5f5fff">143 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;TT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;UL&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;VAR&quot;</font></span>&nbsp;]<br>
<span style="background-color: #080808"><font color="#5f5fff">144 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deprecated_onetags = [ <span style="background-color: #262626"><font color="#ffaf5f">&quot;BASEFONT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;ISINDEX&quot;</font></span>&nbsp;]<br>
<span style="background-color: #080808"><font color="#5f5fff">145 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deprecated_twotags = [ <span style="background-color: #262626"><font color="#ffaf5f">&quot;APPLET&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;CENTER&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;DIR&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;FONT&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;MENU&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;S&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;STRIKE&quot;</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">&quot;U&quot;</font></span>&nbsp;]<br>
<span style="background-color: #080808"><font color="#5f5fff">146 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">147 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>header = [ ]<br>
<span style="background-color: #080808"><font color="#5f5fff">148 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>content = [ ]<br>
<span style="background-color: #080808"><font color="#5f5fff">149 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>footer = [ ]<br>
<span style="background-color: #080808"><font color="#5f5fff">150 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>case = case<br>
<span style="background-color: #080808"><font color="#5f5fff">151 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>separator = separator<br>
<span style="background-color: #080808"><font color="#5f5fff">152 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">153 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ffff"># init( ) sets it to True so we know that &lt;/body&gt;&lt;/html&gt; has to be printed at the end</font><br>
<span style="background-color: #080808"><font color="#5f5fff">154 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>_full = <font color="#ffff00">False</font><br>
<span style="background-color: #080808"><font color="#5f5fff">155 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>class_= class_<br>
<span style="background-color: #080808"><font color="#5f5fff">156 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">157 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">or</font>&nbsp;mode == <span style="background-color: #262626"><font color="#ffaf5f">'html'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">158 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags = valid_onetags<br>
<span style="background-color: #080808"><font color="#5f5fff">159 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags += <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>str</b></font><span style="background-color: #080808"><font color="#ffffff">.</font></span>lower, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags ))<br>
<span style="background-color: #080808"><font color="#5f5fff">160 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags = valid_twotags<br>
<span style="background-color: #080808"><font color="#5f5fff">161 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags += <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>str</b></font><span style="background-color: #080808"><font color="#ffffff">.</font></span>lower, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags ))<br>
<span style="background-color: #080808"><font color="#5f5fff">162 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags = deprecated_onetags + deprecated_twotags<br>
<span style="background-color: #080808"><font color="#5f5fff">163 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags += <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>str</b></font><span style="background-color: #080808"><font color="#ffffff">.</font></span>lower, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>deptags ))<br>
<span style="background-color: #080808"><font color="#5f5fff">164 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode = <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">165 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;mode == <span style="background-color: #262626"><font color="#ffaf5f">'loose_html'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">166 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags = valid_onetags + deprecated_onetags<span style="background-color: #ff6060"><font color="#ffffff">&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">167 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags += <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>str</b></font><span style="background-color: #080808"><font color="#ffffff">.</font></span>lower, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags ))<br>
<span style="background-color: #080808"><font color="#5f5fff">168 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags = valid_twotags + deprecated_twotags<br>
<span style="background-color: #080808"><font color="#5f5fff">169 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags += <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>str</b></font><span style="background-color: #080808"><font color="#ffffff">.</font></span>lower, self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags ))<br>
<span style="background-color: #080808"><font color="#5f5fff">170 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode = mode<br>
<span style="background-color: #080808"><font color="#5f5fff">171 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;mode == <span style="background-color: #262626"><font color="#ffaf5f">'xml'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">172 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;onetags <font color="#ffff00">and</font>&nbsp;twotags:<br>
<span style="background-color: #080808"><font color="#5f5fff">173 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags = onetags<br>
<span style="background-color: #080808"><font color="#5f5fff">174 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags = twotags<br>
<span style="background-color: #080808"><font color="#5f5fff">175 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;( onetags <font color="#ffff00">and</font>&nbsp;<font color="#ffff00">not</font>&nbsp;twotags ) <font color="#ffff00">or</font>&nbsp;( twotags <font color="#ffff00">and</font>&nbsp;<font color="#ffff00">not</font>&nbsp;onetags ):<br>
<span style="background-color: #080808"><font color="#5f5fff">176 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;CustomizationError( )<br>
<span style="background-color: #080808"><font color="#5f5fff">177 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">178 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>onetags = russell( )<br>
<span style="background-color: #080808"><font color="#5f5fff">179 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>twotags = russell( )<br>
<span style="background-color: #080808"><font color="#5f5fff">180 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode = mode<br>
<span style="background-color: #080808"><font color="#5f5fff">181 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">182 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;ModeError( mode )<br>
<span style="background-color: #080808"><font color="#5f5fff">183 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">184 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__getattr__</b></font>( self, attr ):<br>
<span style="background-color: #080808"><font color="#5f5fff">185 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;attr<span style="background-color: #080808"><font color="#ffffff">.</font></span>startswith(<span style="background-color: #262626"><font color="#ffaf5f">&quot;__&quot;</font></span>) <font color="#ffff00">and</font>&nbsp;attr<span style="background-color: #080808"><font color="#ffffff">.</font></span>endswith(<span style="background-color: #262626"><font color="#ffaf5f">&quot;__&quot;</font></span>):<br>
<span style="background-color: #080808"><font color="#5f5fff">186 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;<font color="#87ffaf">AttributeError</font>(attr)<br>
<span style="background-color: #080808"><font color="#5f5fff">187 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;element( attr, case=self<span style="background-color: #080808"><font color="#ffffff">.</font></span>case, parent=self )<br>
<span style="background-color: #080808"><font color="#5f5fff">188 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">189 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__str__</b></font>( self ):<br>
<span style="background-color: #080808"><font color="#5f5fff">190 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">191 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>_full <font color="#ffff00">and</font>&nbsp;( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">or</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'loose_html'</font></span>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">192 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = [ <span style="background-color: #262626"><font color="#ffaf5f">'&lt;/body&gt;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&lt;/html&gt;'</font></span>&nbsp;]<br>
<span style="background-color: #080808"><font color="#5f5fff">193 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">194 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = [ ]<br>
<span style="background-color: #080808"><font color="#5f5fff">195 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">196 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>separator<span style="background-color: #080808"><font color="#ffffff">.</font></span>join( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>header + self<span style="background-color: #080808"><font color="#ffffff">.</font></span>content + self<span style="background-color: #080808"><font color="#ffffff">.</font></span>footer + end )<br>
<span style="background-color: #080808"><font color="#5f5fff">197 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">198 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__call__</b></font>( self, escape=<font color="#ffff00">False</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">199 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Return the document as a string.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">200 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">201 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escape --&nbsp;&nbsp; False&nbsp;&nbsp; print normally</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">202 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;True&nbsp;&nbsp;&nbsp;&nbsp;replace &lt; and &gt; by &amp;lt; and &amp;gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">203 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the default escape sequences in most browsers&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">204 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">205 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;escape:<br>
<span style="background-color: #080808"><font color="#5f5fff">206 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;_escape( self<span style="background-color: #080808"><font color="#ffffff">.</font></span>__str__( ) )<br>
<span style="background-color: #080808"><font color="#5f5fff">207 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">208 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>__str__( )<br>
<span style="background-color: #080808"><font color="#5f5fff">209 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">210 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>add</b></font>( self, text ):<br>
<span style="background-color: #080808"><font color="#5f5fff">211 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This is an alias to addcontent.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">212 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>addcontent( text )<br>
<span style="background-color: #080808"><font color="#5f5fff">213 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">214 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>addfooter</b></font>( self, text ):<br>
<span style="background-color: #080808"><font color="#5f5fff">215 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Add some text to the bottom of the document&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">216 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>footer<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( text )<br>
<span style="background-color: #080808"><font color="#5f5fff">217 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">218 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>addheader</b></font>( self, text ):<br>
<span style="background-color: #080808"><font color="#5f5fff">219 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Add some text to the top of the document&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">220 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>header<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( text )<br>
<span style="background-color: #080808"><font color="#5f5fff">221 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">222 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>addcontent</b></font>( self, text ):<br>
<span style="background-color: #080808"><font color="#5f5fff">223 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Add some text to the main part of the document&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">224 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>content<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( text )<br>
<span style="background-color: #080808"><font color="#5f5fff">225 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">226 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">227 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>init</b></font>( self, lang=<span style="background-color: #262626"><font color="#ffaf5f">'en'</font></span>, css=<font color="#ffff00">None</font>, metainfo=<font color="#ffff00">None</font>, title=<font color="#ffff00">None</font>, header=<font color="#ffff00">None</font>,<br>
<span style="background-color: #080808"><font color="#5f5fff">228 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;footer=<font color="#ffff00">None</font>, charset=<font color="#ffff00">None</font>, encoding=<font color="#ffff00">None</font>, doctype=<font color="#ffff00">None</font>, bodyattrs=<font color="#ffff00">None</font>, script=<font color="#ffff00">None</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">229 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This method is used for complete documents with appropriate</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">230 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doctype, encoding, title, etc information. For an HTML/XML snippet</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">231 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;omit this method.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">232 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">233 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lang --&nbsp;&nbsp;&nbsp;&nbsp; language, usually a two character string, will appear</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">234 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as &lt;html lang='en'&gt; in html mode (ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">235 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">236 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;css --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cascading Style Sheet filename as a string or a list of</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">237 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strings for multiple css files (ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">238 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">239 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metainfo -- a dictionary in the form { 'name':'content' } to be inserted</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">240 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into meta element(s) as &lt;meta name='name' content='content'&gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">241 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">242 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">243 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bodyattrs --a dictionary in the form { 'key':'value', ... } which will be added</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">244 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as attributes of the &lt;body&gt; element as &lt;body key='value' ... &gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">245 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">246 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">247 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script --&nbsp;&nbsp; dictionary containing src:type pairs, &lt;script type='text/type' src=src&gt;&lt;/script&gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">248 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">249 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title --&nbsp;&nbsp;&nbsp;&nbsp;the title of the document as a string to be inserted into</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">250 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a title element as &lt;title&gt;my title&lt;/title&gt; (ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">251 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">252 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;header --&nbsp;&nbsp; some text to be inserted right after the &lt;body&gt; element</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">253 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">254 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">255 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;footer --&nbsp;&nbsp; some text to be inserted right before the &lt;/body&gt; element</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">256 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">257 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">258 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;charset --&nbsp;&nbsp;a string defining the character set, will be inserted into a</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">259 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta http-equiv='Content-Type' content='text/html; charset=myset'&gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">260 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element (ignored in xml mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">261 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">262 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encoding -- a string defining the encoding, will be put into to first line of</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">263 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the document as &lt;?xml version='1.0' encoding='myencoding' ?&gt; in</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">264 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml mode (ignored in html mode)</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">265 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">266 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doctype --&nbsp;&nbsp;the document type string, defaults to</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">267 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'&gt;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">268 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in html mode (ignored in xml mode)&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">269 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">270 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>_full = <font color="#ffff00">True</font><br>
<span style="background-color: #080808"><font color="#5f5fff">271 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">272 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'strict_html'</font></span>&nbsp;<font color="#ffff00">or</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'loose_html'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">273 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;doctype <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">274 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doctype = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'&gt;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">275 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>header<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( doctype )<br>
<span style="background-color: #080808"><font color="#5f5fff">276 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>html( lang=lang )<br>
<span style="background-color: #080808"><font color="#5f5fff">277 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>head( )<br>
<span style="background-color: #080808"><font color="#5f5fff">278 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;charset <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">279 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>meta( http_equiv=<span style="background-color: #262626"><font color="#ffaf5f">'Content-Type'</font></span>, content=<span style="background-color: #262626"><font color="#ffaf5f">&quot;text/html; charset=</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">&quot;</font></span>&nbsp;% charset )<br>
<span style="background-color: #080808"><font color="#5f5fff">280 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;metainfo <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">281 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>metainfo( metainfo )<br>
<span style="background-color: #080808"><font color="#5f5fff">282 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;css <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">283 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>css( css )<br>
<span style="background-color: #080808"><font color="#5f5fff">284 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;title <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">285 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>title( title )<br>
<span style="background-color: #080808"><font color="#5f5fff">286 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;script <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">287 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>scripts( script )<br>
<span style="background-color: #080808"><font color="#5f5fff">288 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>head<span style="background-color: #080808"><font color="#ffffff">.</font></span>close()<br>
<span style="background-color: #080808"><font color="#5f5fff">289 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;bodyattrs <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">290 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>body( **bodyattrs )<br>
<span style="background-color: #080808"><font color="#5f5fff">291 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">292 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>body( )<br>
<span style="background-color: #080808"><font color="#5f5fff">293 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;header <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">294 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>content<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( header )<br>
<span style="background-color: #080808"><font color="#5f5fff">295 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;footer <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">296 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>footer<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( footer )<br>
<span style="background-color: #080808"><font color="#5f5fff">297 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">298 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>mode == <span style="background-color: #262626"><font color="#ffaf5f">'xml'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">299 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;doctype <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">300 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;encoding <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">not</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">301 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doctype = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;?xml version='1.0' encoding='</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' ?&gt;&quot;</font></span>&nbsp;% encoding<br>
<span style="background-color: #080808"><font color="#5f5fff">302 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">303 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doctype = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;?xml version='1.0' ?&gt;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">304 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>header<span style="background-color: #080808"><font color="#ffffff">.</font></span>append( doctype )<br>
<span style="background-color: #080808"><font color="#5f5fff">305 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">306 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>css</b></font>( self, filelist ):<br>
<span style="background-color: #080808"><font color="#5f5fff">307 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This convenience function is only useful for html.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">308 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It adds css stylesheet(s) to the document via the &lt;link&gt; element.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">309 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">310 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( filelist, <font color="#00ffff"><b>str</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">311 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>link( href=filelist, rel=<span style="background-color: #262626"><font color="#ffaf5f">'stylesheet'</font></span>, <font color="#00ffff"><b>type</b></font>=<span style="background-color: #262626"><font color="#ffaf5f">'text/css'</font></span>, media=<span style="background-color: #262626"><font color="#ffaf5f">'all'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">312 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">313 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;file <font color="#ffff00">in</font>&nbsp;filelist:<br>
<span style="background-color: #080808"><font color="#5f5fff">314 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>link( href=file, rel=<span style="background-color: #262626"><font color="#ffaf5f">'stylesheet'</font></span>, <font color="#00ffff"><b>type</b></font>=<span style="background-color: #262626"><font color="#ffaf5f">'text/css'</font></span>, media=<span style="background-color: #262626"><font color="#ffaf5f">'all'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">315 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">316 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>metainfo</b></font>( self, mydict ):<br>
<span style="background-color: #080808"><font color="#5f5fff">317 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;This convenience function is only useful for html.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">318 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It adds meta information via the &lt;meta&gt; element, the argument is</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">319 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a dictionary of the form { 'name':'content' }.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">320 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">321 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( mydict, <font color="#00ffff"><b>dict</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">322 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;name, content <font color="#ffff00">in</font>&nbsp;mydict<span style="background-color: #080808"><font color="#ffffff">.</font></span>items( ):<br>
<span style="background-color: #080808"><font color="#5f5fff">323 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>meta( name=name, content=content )<br>
<span style="background-color: #080808"><font color="#5f5fff">324 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">325 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;<font color="#87ffaf">TypeError</font>(<span style="background-color: #262626"><font color="#ffaf5f">&quot;Metainfo should be called with a dictionary argument of name:content pairs.&quot;</font></span>)<br>
<span style="background-color: #080808"><font color="#5f5fff">326 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">327 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>scripts</b></font>( self, mydict ):<br>
<span style="background-color: #080808"><font color="#5f5fff">328 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Only useful in html, mydict is dictionary of src:type pairs will</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">329 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be rendered as &lt;script type='text/type' src=src&gt;&lt;/script&gt;&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">330 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">331 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( mydict, <font color="#00ffff"><b>dict</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">332 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;src, <font color="#00ffff"><b>type</b></font>&nbsp;<font color="#ffff00">in</font>&nbsp;mydict<span style="background-color: #080808"><font color="#ffffff">.</font></span>items( ):<br>
<span style="background-color: #080808"><font color="#5f5fff">333 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>script( <span style="background-color: #262626"><font color="#ffaf5f">''</font></span>, src=src, <font color="#00ffff"><b>type</b></font>=<span style="background-color: #262626"><font color="#ffaf5f">'text/</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>&nbsp;% <font color="#00ffff"><b>type</b></font>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">334 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">335 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;<font color="#87ffaf">TypeError</font>(<span style="background-color: #262626"><font color="#ffaf5f">&quot;Script should be given a dictionary of src:type pairs.&quot;</font></span>)<br>
<span style="background-color: #080808"><font color="#5f5fff">336 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">337 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">338 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>_oneliner</b></font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">339 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;An instance of oneliner returns a string corresponding to one element.</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">340 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;This class can be used to write 'oneliners' that return a string</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">341 </font></span><span style="background-color: #262626"><font color="#ffaf5f">&nbsp;&nbsp;&nbsp;&nbsp;immediately so there is no need to instantiate the page class.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">342 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">343 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, case=<span style="background-color: #262626"><font color="#ffaf5f">'lower'</font></span>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">344 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>case = case<br>
<span style="background-color: #080808"><font color="#5f5fff">345 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">346 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__getattr__</b></font>( self, attr ):<br>
<span style="background-color: #080808"><font color="#5f5fff">347 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;attr<span style="background-color: #080808"><font color="#ffffff">.</font></span>startswith(<span style="background-color: #262626"><font color="#ffaf5f">&quot;__&quot;</font></span>) <font color="#ffff00">and</font>&nbsp;attr<span style="background-color: #080808"><font color="#ffffff">.</font></span>endswith(<span style="background-color: #262626"><font color="#ffaf5f">&quot;__&quot;</font></span>):<br>
<span style="background-color: #080808"><font color="#5f5fff">348 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;<font color="#87ffaf">AttributeError</font>(attr)<br>
<span style="background-color: #080808"><font color="#5f5fff">349 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;element( attr, case=self<span style="background-color: #080808"><font color="#ffffff">.</font></span>case, parent=<font color="#ffff00">None</font>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">350 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">351 </font></span>oneliner = _oneliner( case=<span style="background-color: #262626"><font color="#ffaf5f">'lower'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">352 </font></span>upper_oneliner = _oneliner( case=<span style="background-color: #262626"><font color="#ffaf5f">'upper'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">353 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">354 </font></span><font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>_argsdicts</b></font>( args, mydict ):<br>
<span style="background-color: #080808"><font color="#5f5fff">355 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;A utility generator that pads argument list and dictionary values, will only be called with len( args ) = 0, 1.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">356 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">357 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) == <font color="#ff5f5f">0</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">358 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args = <font color="#ffff00">None</font>,<span style="background-color: #ff6060"><font color="#ffffff">&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">359 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;<font color="#00ffff"><b>len</b></font>( args ) == <font color="#ff5f5f">1</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">360 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args = _totuple( args[<font color="#ff5f5f">0</font>] )<br>
<span style="background-color: #080808"><font color="#5f5fff">361 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">362 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">raise</font>&nbsp;<font color="#87ffaf">Exception</font>(<span style="background-color: #262626"><font color="#ffaf5f">&quot;We should have never gotten here.&quot;</font></span>)<br>
<span style="background-color: #080808"><font color="#5f5fff">363 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">364 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;mykeys = <font color="#00ffff"><b>list</b></font>(mydict<span style="background-color: #080808"><font color="#ffffff">.</font></span>keys( ))<br>
<span style="background-color: #080808"><font color="#5f5fff">365 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;myvalues = <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( _totuple, <font color="#00ffff"><b>list</b></font>(mydict<span style="background-color: #080808"><font color="#ffffff">.</font></span>values( )) ))<br>
<span style="background-color: #080808"><font color="#5f5fff">366 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">367 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;maxlength = <font color="#00ffff"><b>max</b></font>( <font color="#00ffff"><b>list</b></font>(<font color="#00ffff"><b>map</b></font>( <font color="#00ffff"><b>len</b></font>, [ args ] + myvalues )) )<br>
<span style="background-color: #080808"><font color="#5f5fff">368 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">369 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;i <font color="#ffff00">in</font>&nbsp;<font color="#00ffff"><b>range</b></font>( maxlength ):<br>
<span style="background-color: #080808"><font color="#5f5fff">370 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisdict = { }<br>
<span style="background-color: #080808"><font color="#5f5fff">371 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">for</font>&nbsp;key, value <font color="#ffff00">in</font>&nbsp;<font color="#00ffff"><b>zip</b></font>( mykeys, myvalues ):<br>
<span style="background-color: #080808"><font color="#5f5fff">372 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">try</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">373 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisdict[ key ] = value[i]<br>
<span style="background-color: #080808"><font color="#5f5fff">374 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">except</font>&nbsp;<font color="#87ffaf">IndexError</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">375 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisdict[ key ] = value[-<font color="#ff5f5f">1</font>]<br>
<span style="background-color: #080808"><font color="#5f5fff">376 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">try</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">377 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisarg = args[i]<br>
<span style="background-color: #080808"><font color="#5f5fff">378 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">except</font>&nbsp;<font color="#87ffaf">IndexError</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">379 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisarg = args[-<font color="#ff5f5f">1</font>]<br>
<span style="background-color: #080808"><font color="#5f5fff">380 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">381 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">yield</font>&nbsp;thisarg, thisdict<br>
<span style="background-color: #080808"><font color="#5f5fff">382 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">383 </font></span><font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>_totuple</b></font>( x ):<br>
<span style="background-color: #080808"><font color="#5f5fff">384 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Utility stuff to convert string, int, float, None or anything to a usable tuple.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">385 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">386 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( x, <font color="#00ffff"><b>str</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">387 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = x,<br>
<span style="background-color: #080808"><font color="#5f5fff">388 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( x, ( <font color="#00ffff"><b>int</b></font>, <font color="#00ffff"><b>float</b></font>&nbsp;) ):<br>
<span style="background-color: #080808"><font color="#5f5fff">389 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <font color="#00ffff"><b>str</b></font>( x ),<br>
<span style="background-color: #080808"><font color="#5f5fff">390 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">elif</font>&nbsp;x <font color="#ffff00">is</font>&nbsp;<font color="#ffff00">None</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">391 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <font color="#ffff00">None</font>,<br>
<span style="background-color: #080808"><font color="#5f5fff">392 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">else</font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">393 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out = <font color="#00ffff"><b>tuple</b></font>( x )<br>
<span style="background-color: #080808"><font color="#5f5fff">394 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">395 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;out<br>
<span style="background-color: #080808"><font color="#5f5fff">396 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">397 </font></span><font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>escape</b></font>( text, newline=<font color="#ffff00">False</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">398 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Escape special html characters.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">399 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">400 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( text, <font color="#00ffff"><b>str</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">401 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&amp;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">402 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&amp;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;amp;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">403 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&gt;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">404 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&gt;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;gt;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">405 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&lt;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">406 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&lt;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;lt;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">407 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\&quot;</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">408 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\&quot;</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;quot;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">409 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\'</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">410 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\'</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;quot;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">411 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;newline:<br>
<span style="background-color: #080808"><font color="#5f5fff">412 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\n</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">413 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\n</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&lt;br&gt;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">414 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">415 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;text<br>
<span style="background-color: #080808"><font color="#5f5fff">416 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">417 </font></span>_escape = escape<br>
<span style="background-color: #080808"><font color="#5f5fff">418 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">419 </font></span><font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>unescape</b></font>( text ):<br>
<span style="background-color: #080808"><font color="#5f5fff">420 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;Inverse of escape.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">421 </font></span><span style="background-color: #ff6060"><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">422 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<font color="#00ffff"><b>isinstance</b></font>( text, <font color="#00ffff"><b>str</b></font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">423 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&amp;amp;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">424 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&amp;amp;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&amp;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">425 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&amp;gt;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">426 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&amp;gt;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&gt;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">427 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&amp;lt;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">428 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&amp;lt;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'&lt;'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">429 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">if</font>&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">'&amp;quot;'</font></span>&nbsp;<font color="#ffff00">in</font>&nbsp;text:<br>
<span style="background-color: #080808"><font color="#5f5fff">430 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = text<span style="background-color: #080808"><font color="#ffffff">.</font></span>replace( <span style="background-color: #262626"><font color="#ffaf5f">'&amp;quot;'</font></span>, <span style="background-color: #262626"><font color="#ffaf5f">'</font></span><font color="#ffd7d7">\&quot;</font><span style="background-color: #262626"><font color="#ffaf5f">'</font></span>&nbsp;)<br>
<span style="background-color: #080808"><font color="#5f5fff">431 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">432 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;text<br>
<span style="background-color: #080808"><font color="#5f5fff">433 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">434 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>dummy</b></font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">435 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;A dummy class for attaching attributes.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">436 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">pass</font><br>
<span style="background-color: #080808"><font color="#5f5fff">437 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">438 </font></span>doctype = dummy( )<br>
<span style="background-color: #080808"><font color="#5f5fff">439 </font></span>doctype<span style="background-color: #080808"><font color="#ffffff">.</font></span>frameset = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Frameset//EN' '<a href="http://www.w3.org/TR/html4/frameset.dtd">http://www.w3.org/TR/html4/frameset.dtd</a>'&gt;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">440 </font></span>doctype<span style="background-color: #080808"><font color="#ffffff">.</font></span>strict = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' '<a href="http://www.w3.org/TR/html4/strict.dtd">http://www.w3.org/TR/html4/strict.dtd</a>'&gt;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">441 </font></span>doctype<span style="background-color: #080808"><font color="#ffffff">.</font></span>loose = <span style="background-color: #262626"><font color="#ffaf5f">&quot;&lt;!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' '<a href="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</a>'&gt;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">442 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">443 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>russell</b></font>:<br>
<span style="background-color: #080808"><font color="#5f5fff">444 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;A dummy class that contains anything.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">445 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">446 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__contains__</b></font>( self, item ):<br>
<span style="background-color: #080808"><font color="#5f5fff">447 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;<font color="#ffff00">True</font><br>
<span style="background-color: #080808"><font color="#5f5fff">448 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">449 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">450 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>MarkupError</b></font>( <font color="#87ffaf">Exception</font>&nbsp;):<br>
<span style="background-color: #080808"><font color="#5f5fff">451 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #262626"><font color="#ffaf5f">&quot;&quot;&quot;All our exceptions subclass this.&quot;&quot;&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">452 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__str__</b></font>( self ):<br>
<span style="background-color: #080808"><font color="#5f5fff">453 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">return</font>&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message<br>
<span style="background-color: #080808"><font color="#5f5fff">454 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">455 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>ClosingError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">456 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag ):<br>
<span style="background-color: #080808"><font color="#5f5fff">457 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;The element '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' does not accept non-keyword arguments (has no closing tag).&quot;</font></span>&nbsp;% tag<br>
<span style="background-color: #080808"><font color="#5f5fff">458 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">459 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>OpeningError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">460 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag ):<br>
<span style="background-color: #080808"><font color="#5f5fff">461 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;The element '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' can not be opened.&quot;</font></span>&nbsp;% tag<br>
<span style="background-color: #080808"><font color="#5f5fff">462 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">463 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>ArgumentError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">464 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag ):<br>
<span style="background-color: #080808"><font color="#5f5fff">465 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;The element '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' was called with more than one non-keyword argument.&quot;</font></span>&nbsp;% tag<br>
<span style="background-color: #080808"><font color="#5f5fff">466 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">467 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>InvalidElementError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">468 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag, mode ):<br>
<span style="background-color: #080808"><font color="#5f5fff">469 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;The element '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' is not valid for your mode '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">'.&quot;</font></span>&nbsp;% ( tag, mode )<br>
<span style="background-color: #080808"><font color="#5f5fff">470 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">471 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>DeprecationError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">472 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, tag ):<br>
<span style="background-color: #080808"><font color="#5f5fff">473 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;The element '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' is deprecated, instantiate markup.page with mode='loose_html' to allow it.&quot;</font></span>&nbsp;% tag<br>
<span style="background-color: #080808"><font color="#5f5fff">474 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">475 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>ModeError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">476 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self, mode ):<br>
<span style="background-color: #080808"><font color="#5f5fff">477 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;Mode '</font></span><font color="#ffd7d7">%s</font><span style="background-color: #262626"><font color="#ffaf5f">' is invalid, possible values: strict_html, loose_html, xml.&quot;</font></span>&nbsp;% mode<br>
<span style="background-color: #080808"><font color="#5f5fff">478 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">479 </font></span><font color="#ffff00">class</font>&nbsp;<font color="#00ffff"><b>CustomizationError</b></font>( MarkupError ):<br>
<span style="background-color: #080808"><font color="#5f5fff">480 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#ffff00">def</font>&nbsp;<font color="#00ffff"><b>__init__</b></font>( self ):<br>
<span style="background-color: #080808"><font color="#5f5fff">481 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self<span style="background-color: #080808"><font color="#ffffff">.</font></span>message = <span style="background-color: #262626"><font color="#ffaf5f">&quot;If you customize the allowed elements, you must define both types 'onetags' and 'twotags'.&quot;</font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">482 </font></span><br>
<span style="background-color: #080808"><font color="#5f5fff">483 </font></span><font color="#ffff00">if</font>&nbsp;<font color="#87ffaf">__name__</font>&nbsp;== <span style="background-color: #262626"><font color="#ffaf5f">'__main__'</font></span>:<br>
<span style="background-color: #080808"><font color="#5f5fff">484 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00ffff"><b>print</b></font>(<font color="#87ffaf">__doc__</font>)<br>
</font></body>
</html>
